<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="./WS_icon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebSerial: A browser based Serial Port application</title>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-92R1P3X8S1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-92R1P3X8S1');
    </script>
    <script type="module" crossorigin src="index.83ca0466.js"></script>
    <link rel="stylesheet" href="index.9b736b96.css">
    <script src="https://ldijkman.github.io/Ace_Seventh_Heaven/console.js"></script>
  </head>
  <body>        <!-- Button to clear the contents of the section -->
  
   <!-- Button to delete all <pre> elements -->
  
    <div id="app"></div>



    <script>
setTimeout(() => {
        function addDeletePreButton() {
            // Create the new button element
            const button = document.createElement('button');
            button.id = 'deletePre1'; // Set the button's ID
            button.innerHTML = 'Delete All &lt;pre&gt; Elements'; // Set the button's display text

            // Optionally, add an event listener for the button's click event
            button.addEventListener('click', function() {
                // Code to delete all <pre> elements (or any other action)
                console.log('Button clicked. Implement the deletion logic here.');
            });

            // Find the header element by its ID
            const header = document.getElementById('pageHeader');

            // Append the newly created button to the header
            header.appendChild(button);
        }

        // Call the function to dynamically add the button to the header
        addDeletePreButton();
      
        // Function to delete all <pre> elements in the section#output
        function deleteAllPreElements() {
            const outputSection = document.getElementById('output');
            const preElements = outputSection.querySelectorAll('pre');
            
            preElements.forEach(pre => {
                pre.remove(); // Removes the <pre> element from the document
            });
        }

        // Add event listener to the "Delete All <pre> Elements" button
        document.getElementById('deletePre').addEventListener('click', deleteAllPreElements);
      }, 5000);
 

        function makeLinksClickable() {
    // Function to replace URLs with clickable links within a given element
    function processElement(element) {
      // URL Regular Expression
      const urlRegex = /(http[s]?:\/\/[^\s]+)/g;

      // Check if the element is already processed to avoid re-processing
      if (!element.hasAttribute('data-processed')) {
        let htmlContent = element.innerHTML;

        // Replace URLs with clickable links in the HTML content
        htmlContent = htmlContent.replace(urlRegex, (url) => {
          return `<a href="${url}" target="_blank" rel="noopener noreferrer">${url}</a>`;
        });

        // Update the element's HTML content with the modified content
        element.innerHTML = htmlContent;

        // Mark the element as processed
        element.setAttribute('data-processed', 'true');
      }
    }

    // Select all <pre> elements within the section#output that are not processed
    const preElements = document.querySelectorAll('#output pre:not([data-processed])');
    preElements.forEach(processElement);
  }

  // Use MutationObserver to observe changes in the #output section
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      // For each added node, check if it's a <pre> element and process it
      mutation.addedNodes.forEach((node) => {
        if (node.nodeName.toLowerCase() === 'pre') {
          makeLinksClickable();
        }
      });
    });
  });

  // Start observing the #output section for child additions
  const outputSection = document.querySelector('#output');
  observer.observe(outputSection, { childList: true });

  // Initial call to process any <pre> elements already present
    setTimeout(makeLinksClickable(), 5000);
    </script>
  <!-- Button to delete all <pre> elements -->
    <br><button id="deletePre">Delete All &lt;pre&gt; Elements</button><br>
playing a bit with it

not perfect

want a diconnect button

want a clear button

want black terminal

want links better
<br> FLASH ESP INBROWSER 
  <a href="https://ldijkman.github.io/async-esp-fs-webserver/" target="_blank" rel="noopener noreferrer">Open Async ESP FS Webserver</a>  

    

      <script src="https://ldijkman.github.io/async-esp-fs-webserver/foother.js"></script>
  </body>
</html>
